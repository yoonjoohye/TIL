# 자바스크립트 동작원리 

![js-engine-runtime](https://user-images.githubusercontent.com/26542929/85988916-b9fd4f00-ba2a-11ea-8430-6170b826ee75.png)

## 메모리 힙

![image](https://user-images.githubusercontent.com/26542929/85989782-fb422e80-ba2b-11ea-9a4d-fe3d4fbc4401.png)

메모리 할당이 일어나는 곳
콜스택이 작업을 하기위해 변수나 객체 등을 찾는 공간

**메모리 생존 주기**
1. 할당
2. 사용
3. 해제


## 호출 스택(Call Stack)

![image](https://user-images.githubusercontent.com/26542929/85989112-0c3e7000-ba2b-11ea-9356-1812b1cfb7f0.png)

호출을 스택구조로 모아둔 것
함수를 실행하면 해당 함수는 호출스택의 최상단에 쌓이고, 실행이 끝나면 호출 스택에서 제거됨.

* 스택 트레이스 : 예외 발생 시
* 스택 날림 : 재귀함수 등 무한루프에 빠져 콜스택의 최대 크기를 넘었을 시


## WEB API

외부에 내장된 API
비동기 함수(setTimeOut, AJAX 등)는 WEB API를 호출하고, WEB API는 콜백 작업을 골백 큐에 넣음.


## 콜백 큐

WEB API에서 콜백 작업을 저장함.


## 이벤트 루프

감독관 역할

콜 스택의 작업이 비워져있는걸 확인하고, 콜백 큐의 첫번째 작업을 콜 스택에게 보냄.


## 동시성 제공

자바스크립트는 단일 싱글 쓰레드라 한번에 한 작업만 처리할 수 있음.
연산이 복잡한 함수일 경우, 끝날때까지 기다려야해서 다른 작업을 할 수가 없음.
이때 비동기 콜백으로 콜백을 즉시 실행하지 않고, 콜백큐에 놔뒀다가 콜스택이 비워지면 실행하게 해서 다른 작업도 할 수 있게 만들어 둠.



